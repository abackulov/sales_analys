# First Project
Данные хранятся в трех связанных между собой таблицах: таблица с пользователями, таблица с заказами и таблица с товарными позициями, входящими в заказы.
При выполнении задания я решил считать оплату как факт продажи, так как именно это действие более всего из возможных характеризует сделку (как совершенную оферту) и лучше характеризует желание и поведение покупателей, нежели другие: факт создания заказа без оплаты - может быть случайным или необдуманным действием, а факт доставки заказа исключает недоставленные заказы, а причины почему они не доставлены (включая отмену) не указаны, как и кто инициатор и ответственен за то, что заказы не доставлены.
По задачам:
1. для подсчета я использовал значения уникальных айди пользователей, кто оплатил товар, но при этом у которых только один заказ.
2. при решении второго задания я исключил только один заказ со статусом "shipped", который был отправлен в начале сентября 2018г., так как высока вероятность, что он будет доставлен, а все остальные с этим статусом сильно выпадают за рамки среднего срока доставки (mean=8дней, std=8 дней), поэтому можно с высокой долей вероятности считать их утерянными. При подсчете, я исключил все доставленные и неоплаченные заказы, а также заказ описанный выше, затем подсчитал количество каждой категории по месяцам, а затем взял среднее по каждой категории в месяц.
3. продукты содержаться в третьей таблице - с составом заказа, для решения задачи, я соединил таблицу с продуктами с файлом с заказами, так как нужна будет дата оплаты заказа (как я и писал выше, именно ее я взял, как дату покупки). Затем я посчитал сколько количество покупок каждого товара в каждый из дней недели. после этого с помощью цикла (другого варианта придумать не смог) создал датафрейм с товаром и днем недели, в который товар чаще всего покупается.
4. для начала я считаю сколько покупок у каждого клиента в каждом из месяцев, затем я считаю сколько недель в каждом месяце, после этого в отдельной колонке я делю одно на другое и представляю результат в сводной таблице, где строки - покупатели, колонки - месяцы, а в значениях - в среднем покупок в неделю (по месяцам).
5. изначально я создаю дф с месяцем первой покупки у каждого клиента, затем присоединяю его к общему дф с заказами и клиентами, далее группируясь по месяцу первой покупки (когорта) и по месяцу заказа считаю количество заказов каждой когорты в каждом месяце, затем фильтруясь по третьему месяцу получаю итоговую таблицу. Меня смутила формулировка в задании "В период с января по декабрь", возможно имеется в виду только 2017 год (как единственный полный в данных), тогда можно отфильтроваться по году в когорте.
6. изначально в таблице с товарами считаю общую сумму в деньгах по каждому заказу, после этого присоединяю эту таблицу к дф с заказами и клиентами далее считаю количество дней от текущей даты(взял максимальную дату из колонки с оплатами) и датой оплаты каждого заказа. Далее создаю дф с данными для кластеризации, для этого считаю показатели rfm для каждого клиента (группируясь по ним), затем разбиваю (посчитав квантили) на 5 групп каждый показатель и применив заранее написанную простую функцию присваиваю каждому клиенту определенную категорию по r, f и m.